<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Orion Admin - Full Functionality</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      .custom-gradient-blue {
        background: linear-gradient(
          135deg,
          #3b82f6 0%,
          #2563eb 50%,
          #1d4ed8 100%
        );
      }
      .custom-gradient-pink {
        background: linear-gradient(
          135deg,
          #f43f5e 0%,
          #e11d48 50%,
          #be123c 100%
        );
      }
      .custom-gradient-orange {
        background: linear-gradient(
          135deg,
          #f97316 0%,
          #ea580c 50%,
          #c2410c 100%
        );
      }
      .glass-card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(8px);
      }
    </style>
  </head>
  <body class="bg-slate-50 min-h-screen font-sans">
    <header
      class="bg-white border-b px-6 py-3 flex justify-between items-center sticky top-0 z-50"
    >
      <div class="flex items-center gap-2">
        <div class="bg-red-600 p-1.5 rounded-lg">
          <i class="fas fa-tint text-white"></i>
        </div>
        <span class="text-xl font-bold text-gray-800">Orion</span>
      </div>
      <div class="flex items-center gap-4 text-sm">
        <div
          class="flex items-center gap-2 px-3 py-1.5 bg-gray-100 rounded-full font-medium text-gray-700"
        >
          <i class="fas fa-user-shield text-gray-400"></i> Admin User
        </div>
        <a
          href="../login.html"
          class="text-gray-400 hover:text-red-600 transition"
        >
          <i class="fas fa-sign-out-alt"></i> Logout
        </a>
      </div>
    </header>

    <main class="max-w-6xl mx-auto p-8">
      <div class="mb-8">
        <h1 class="text-2xl font-bold text-gray-800">Admin Control Center</h1>
        <p class="text-gray-500 text-sm">
          Real-time management of your life-saving community.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
        <div
          id="tab-donors"
          onclick="switchModule('donors')"
          class="cursor-pointer transition-all p-6 rounded-[2rem] shadow-lg custom-gradient-blue text-white"
        >
          <div class="flex justify-between items-start">
            <div>
              <div class="flex items-center gap-2 mb-2 font-bold">
                <i class="fas fa-users"></i> Donors
              </div>
              <p class="text-xs text-blue-100">
                <span id="stat-donors-count">3</span> Total •
                <span id="stat-donors-pending">1</span> Pending
              </p>
            </div>
            <i class="fas fa-hospital-user text-4xl opacity-20"></i>
          </div>
        </div>

        <div
          id="tab-recipients"
          onclick="switchModule('recipients')"
          class="cursor-pointer transition-all p-6 rounded-[2rem] bg-white text-gray-600 border hover:shadow-md"
        >
          <div class="flex justify-between items-start">
            <div>
              <div class="flex items-center gap-2 mb-2 font-bold text-gray-800">
                <i class="fas fa-heartbeat"></i> Recipients
              </div>
              <p class="text-xs">
                <span id="stat-recipients-count">3</span> Total •
                <span id="stat-recipients-pending">1</span> Pending
              </p>
            </div>
            <i class="fas fa-procedures text-4xl opacity-10"></i>
          </div>
        </div>

        <div
          id="tab-fake"
          onclick="switchModule('fake')"
          class="cursor-pointer transition-all p-6 rounded-[2rem] bg-white text-gray-600 border hover:shadow-md"
        >
          <div class="flex justify-between items-start">
            <div>
              <div class="flex items-center gap-2 mb-2 font-bold text-gray-800">
                <i class="fas fa-user-secret"></i> Fake Detection
              </div>
              <p class="text-xs">
                <span id="stat-fake-count">1</span> Suspicious Profile
              </p>
            </div>
            <i class="fas fa-shield-virus text-4xl opacity-10"></i>
          </div>
        </div>
      </div>

      <div
        class="bg-white rounded-[2.5rem] shadow-sm border border-gray-100 p-8 min-h-[500px]"
      >
        <div id="module-header" class="mb-8"></div>

        <div id="data-list" class="space-y-6"></div>
      </div>
    </main>

    <script>
      /* --- INITIAL DATA --- */
      let donors = [
        {
          id: "D001",
          name: "Michael Johnson",
          email: "michael.j@email.com",
          blood: "O+",
          status: "approved",
          phone: "+1 234-567-8901",
          location: "New York, NY",
          age: "28 / 75kg",
          date: "5/20/2023",
          total: 5,
          last: "10/15/2024",
        },
        {
          id: "D002",
          name: "Sarah Williams",
          email: "sarah.w@email.com",
          blood: "AB+",
          status: "pending",
          phone: "+1 234-567-8904",
          location: "Houston, TX",
          age: "26 / 58kg",
          date: "11/28/2024",
          total: 0,
          last: "Never",
        },
        {
          id: "D003",
          name: "David Chen",
          email: "david.c@email.com",
          blood: "B-",
          status: "approved",
          phone: "+1 234-567-8903",
          location: "Chicago, IL",
          age: "35 / 80kg",
          date: "11/5/2022",
          total: 8,
          last: "8/10/2024",
        },
      ];

      let recipients = [
        {
          id: "R001",
          name: "John Anderson",
          email: "john.a@email.com",
          status: "approved",
          phone: "+1 234-567-9001",
          location: "Boston, MA",
          date: "1/10/2024",
          requests: 2,
          active: 1,
          completed: 1,
        },
        {
          id: "R002",
          name: "Maria Garcia",
          email: "m.garcia@email.com",
          status: "pending",
          phone: "+1 234-567-9005",
          location: "Miami, FL",
          date: "12/01/2024",
          requests: 1,
          active: 1,
          completed: 0,
        },
        {
          id: "R003",
          name: "Robert Fox",
          email: "fox.r@email.com",
          status: "approved",
          phone: "+1 234-567-9002",
          location: "Seattle, WA",
          date: "6/15/2023",
          requests: 4,
          active: 0,
          completed: 4,
        },
      ];

      let suspicious = [
        {
          id: "D099",
          name: "John Fake",
          email: "suspicious@fake.com",
          blood: "O+",
          phone: "+1 000-000-0000",
          location: "Unknown, XX",
          date: "11/29/2024",
          risks: [
            "Invalid phone format",
            "Email domain flagged",
            "Unusual age value",
            "Multiple accounts from same IP",
          ],
        },
      ];

      let currentModule = "donors";
      let currentFilter = "all";

      /* --- ENGINE --- */

      function switchModule(module) {
        currentModule = module;
        currentFilter = "all";

        // Reset Tab Styles
        const configs = {
          donors: { tab: "tab-donors", grad: "custom-gradient-blue" },
          recipients: { tab: "tab-recipients", grad: "custom-gradient-pink" },
          fake: { tab: "tab-fake", grad: "custom-gradient-orange" },
        };

        Object.keys(configs).forEach((key) => {
          const el = document.getElementById(configs[key].tab);
          el.className =
            "cursor-pointer transition-all p-6 rounded-[2rem] bg-white text-gray-600 border hover:shadow-md";
          const icon = el.querySelector("i:last-child");
          icon.className = icon.className.replace("opacity-20", "opacity-10");
        });

        const activeEl = document.getElementById(configs[module].tab);
        activeEl.className = `cursor-pointer transition-all p-6 rounded-[2rem] shadow-lg ${configs[module].grad} text-white`;
        activeEl.querySelector("i:last-child").className = activeEl
          .querySelector("i:last-child")
          .className.replace("opacity-10", "opacity-20");

        render();
      }

      function render() {
        renderHeader();
        renderList();
        updateStats();
      }

      function renderHeader() {
        const header = document.getElementById("module-header");
        let title = "",
          icon = "",
          filterHtml = "";
        let counts = { total: 0, pending: 0 };

        if (currentModule === "donors") {
          title = "All Donor Details";
          icon = "fa-id-card text-blue-600";
          counts.total = donors.length;
          counts.pending = donors.filter((d) => d.status === "pending").length;
          filterHtml = `
                    <button onclick="applyFilter('all')" class="px-6 py-2 rounded-xl text-sm font-bold ${
                      currentFilter === "all"
                        ? "bg-blue-600 text-white"
                        : "bg-gray-100"
                    }">All Donors (${donors.length})</button>
                    <button onclick="applyFilter('approved')" class="px-6 py-2 rounded-xl text-sm font-bold ${
                      currentFilter === "approved"
                        ? "bg-emerald-600 text-white"
                        : "bg-gray-100"
                    }">✓ Approved</button>
                    <button onclick="applyFilter('pending')" class="px-6 py-2 rounded-xl text-sm font-bold ${
                      currentFilter === "pending"
                        ? "bg-amber-600 text-white"
                        : "bg-gray-100"
                    }">⏳ Pending</button>
                `;
        } else if (currentModule === "recipients") {
          title = "All Recipient Details";
          icon = "fa-user-tag text-rose-600";
          counts.total = recipients.length;
          counts.pending = recipients.filter(
            (r) => r.status === "pending"
          ).length;
          filterHtml = `
                    <button onclick="applyFilter('all')" class="px-6 py-2 rounded-xl text-sm font-bold ${
                      currentFilter === "all"
                        ? "bg-rose-600 text-white"
                        : "bg-gray-100"
                    }">All Recipients (${recipients.length})</button>
                    <button onclick="applyFilter('approved')" class="px-6 py-2 rounded-xl text-sm font-bold ${
                      currentFilter === "approved"
                        ? "bg-emerald-600 text-white"
                        : "bg-gray-100"
                    }">✓ Approved</button>
                    <button onclick="applyFilter('pending')" class="px-6 py-2 rounded-xl text-sm font-bold ${
                      currentFilter === "pending"
                        ? "bg-amber-600 text-white"
                        : "bg-gray-100"
                    }">⏳ Pending</button>
                `;
        } else {
          title = "Suspicious Profiles";
          icon = "fa-shield-alt text-orange-600";
          counts.total = suspicious.length;
          filterHtml = `<p class="text-gray-400 text-xs italic">Heuristic detection flagged the following profiles for review.</p>`;
        }

        header.innerHTML = `
                <div class="flex justify-between items-center mb-6">
                    <div class="flex items-center gap-3">
                        <div class="bg-gray-50 p-2 rounded-lg"><i class="fas ${icon}"></i></div>
                        <h2 class="text-xl font-bold text-gray-800">${title}</h2>
                    </div>
                    <div class="flex gap-2">
                        <span class="bg-blue-50 text-blue-600 px-4 py-1.5 rounded-lg text-xs font-bold">${
                          counts.total
                        } Total</span>
                        ${
                          counts.pending
                            ? `<span class="bg-amber-50 text-amber-600 px-4 py-1.5 rounded-lg text-xs font-bold">${counts.pending} Pending</span>`
                            : ""
                        }
                    </div>
                </div>
                <div class="flex flex-wrap gap-4 border-b pb-6">${filterHtml}</div>
            `;
      }

      function renderList() {
        const list = document.getElementById("data-list");
        list.innerHTML = "";

        if (currentModule === "donors") {
          const data = donors.filter(
            (d) => currentFilter === "all" || d.status === currentFilter
          );
          data.forEach((d) => (list.innerHTML += createDonorCard(d)));
        } else if (currentModule === "recipients") {
          const data = recipients.filter(
            (r) => currentFilter === "all" || r.status === currentFilter
          );
          data.forEach((r) => (list.innerHTML += createRecipientCard(r)));
        } else {
          suspicious.forEach((s) => (list.innerHTML += createFakeCard(s)));
        }
      }

      /* --- CARD GENERATORS --- */

      function createDonorCard(d) {
        const isPending = d.status === "pending";
        return `
                <div class="border rounded-[2rem] p-6 ${
                  isPending
                    ? "bg-amber-50/20 border-amber-200"
                    : "bg-slate-50/50"
                }">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex gap-4">
                            <div class="w-12 h-12 ${
                              isPending ? "bg-amber-500" : "bg-blue-600"
                            } rounded-xl flex items-center justify-center text-white"><i class="fas fa-user"></i></div>
                            <div>
                                <h3 class="font-bold text-gray-800">${
                                  d.name
                                } <span class="text-xs font-normal text-gray-400 ml-2">(${
          d.id
        })</span></h3>
                                <p class="text-xs text-gray-500">${d.email}</p>
                                <div class="flex gap-2 mt-1">
                                    <span class="bg-red-500 text-white px-2 py-0.5 rounded text-[10px] font-bold">${
                                      d.blood
                                    }</span>
                                    <span class="px-2 py-0.5 rounded text-[10px] font-bold ${
                                      isPending
                                        ? "bg-amber-100 text-amber-700"
                                        : "bg-emerald-100 text-emerald-700"
                                    }">
                                        ${
                                          isPending
                                            ? "PENDING REVIEW"
                                            : "VERIFIED"
                                        }
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="text-right text-[10px] text-gray-400 font-bold uppercase">Reg: ${
                          d.date
                        }</div>
                    </div>
                    <div class="grid grid-cols-3 gap-4 mb-4 text-xs font-medium">
                        <div class="bg-white p-2 rounded-lg border">Loc: ${
                          d.location
                        }</div>
                        <div class="bg-white p-2 rounded-lg border">Age: ${
                          d.age
                        }</div>
                        <div class="bg-white p-2 rounded-lg border">Total: ${
                          d.total
                        } units</div>
                    </div>
                    ${
                      isPending
                        ? `
                        <div class="flex gap-3">
                            <button onclick="handleAction('donors', '${d.id}', 'approve')" class="flex-1 bg-emerald-600 text-white py-2 rounded-xl text-sm font-bold">Accept</button>
                            <button onclick="handleAction('donors', '${d.id}', 'reject')" class="flex-1 bg-red-600 text-white py-2 rounded-xl text-sm font-bold">Reject</button>
                        </div>
                    `
                        : `<div class="bg-emerald-50 text-emerald-700 p-2 rounded-xl text-xs text-center font-bold">✓ Verified - Active Donor</div>`
                    }
                </div>
            `;
      }

      function createRecipientCard(r) {
        const isPending = r.status === "pending";
        return `
                <div class="border rounded-[2rem] p-6 ${
                  isPending
                    ? "bg-amber-50/20 border-amber-200"
                    : "bg-slate-50/50"
                }">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex gap-4">
                            <div class="w-12 h-12 ${
                              isPending ? "bg-amber-500" : "bg-rose-600"
                            } rounded-xl flex items-center justify-center text-white"><i class="fas fa-heart"></i></div>
                            <div>
                                <h3 class="font-bold text-gray-800">${
                                  r.name
                                } <span class="text-xs font-normal text-gray-400 ml-2">(${
          r.id
        })</span></h3>
                                <p class="text-xs text-gray-500">${r.email}</p>
                            </div>
                        </div>
                        <div class="text-[10px] ${
                          isPending ? "text-amber-600" : "text-emerald-600"
                        } font-bold">${
          isPending ? "PENDING APPROVAL" : "MEDICAL: APPROVED"
        }</div>
                    </div>
                    <div class="bg-white p-4 rounded-2xl flex gap-8 mb-4 border text-center">
                        <div class="flex-1"><p class="text-[9px] text-gray-400 font-bold uppercase">Requests</p><p class="font-bold">${
                          r.requests
                        }</p></div>
                        <div class="flex-1 border-x"><p class="text-[9px] text-gray-400 font-bold uppercase">Active</p><p class="font-bold text-rose-500">${
                          r.active
                        }</p></div>
                        <div class="flex-1"><p class="text-[9px] text-gray-400 font-bold uppercase">Completed</p><p class="font-bold text-emerald-500">${
                          r.completed
                        }</p></div>
                    </div>
                    ${
                      isPending
                        ? `
                        <div class="flex gap-3">
                            <button onclick="handleAction('recipients', '${r.id}', 'approve')" class="flex-1 bg-emerald-600 text-white py-2 rounded-xl text-sm font-bold">Verify Profile</button>
                            <button onclick="handleAction('recipients', '${r.id}', 'reject')" class="flex-1 bg-red-600 text-white py-2 rounded-xl text-sm font-bold">Decline</button>
                        </div>
                    `
                        : `<div class="bg-emerald-50 text-emerald-700 p-2 rounded-xl text-xs text-center font-bold">✓ Profile Active - Emergency Requests Enabled</div>`
                    }
                </div>
            `;
      }

      function createFakeCard(s) {
        return `
                <div class="border-2 border-red-100 rounded-[2rem] p-6 bg-red-50/30">
                    <div class="flex justify-between items-start mb-6">
                        <div class="flex gap-4">
                            <div class="w-14 h-14 bg-red-600 rounded-xl flex items-center justify-center text-white text-xl shadow-lg"><i class="fas fa-exclamation-triangle"></i></div>
                            <div>
                                <h3 class="font-bold text-gray-800">${
                                  s.name
                                } <span class="bg-red-100 text-red-600 px-2 py-0.5 rounded text-[10px] font-black ml-2">FLAGGED</span></h3>
                                <p class="text-xs text-gray-500">${s.email}</p>
                                <p class="text-[10px] font-bold text-red-500 mt-1 uppercase tracking-tighter">High Risk Level Detected</p>
                            </div>
                        </div>
                        <div class="bg-white p-2 rounded-lg border text-center"><p class="text-[8px] text-gray-400 font-bold uppercase">Profile ID</p><p class="text-xs font-black">${
                          s.id
                        }</p></div>
                    </div>
                    <div class="bg-white/60 border border-red-100 p-4 rounded-2xl mb-6">
                        <p class="text-xs font-bold text-gray-700 mb-2"><i class="fas fa-bug mr-2"></i>Suspicious Activity Detected:</p>
                        <ul class="text-[11px] space-y-1 text-gray-600 font-medium">
                            ${s.risks
                              .map(
                                (r) =>
                                  `<li class="flex items-center gap-2"><div class="w-1 h-1 rounded-full bg-red-400"></div> ${r}</li>`
                              )
                              .join("")}
                        </ul>
                    </div>
                    <div class="grid grid-cols-3 gap-3">
                        <button onclick="handleAction('fake', '${
                          s.id
                        }', 'block')" class="bg-red-600 text-white py-2 rounded-xl text-xs font-bold hover:bg-red-700 transition"><i class="fas fa-ban mr-1"></i> Block Profile</button>
                        <button onclick="alert('Opening logs...')" class="bg-gray-800 text-white py-2 rounded-xl text-xs font-bold hover:bg-black transition"><i class="fas fa-search mr-1"></i> Investigate</button>
                        <button onclick="handleAction('fake', '${
                          s.id
                        }', 'safe')" class="bg-emerald-600 text-white py-2 rounded-xl text-xs font-bold hover:bg-emerald-700 transition"><i class="fas fa-check mr-1"></i> Mark Safe</button>
                    </div>
                </div>
            `;
      }

      /* --- ACTIONS --- */

      function applyFilter(f) {
        currentFilter = f;
        render();
      }

      function handleAction(module, id, action) {
        if (module === "donors") {
          if (action === "approve")
            donors.find((d) => d.id === id).status = "approved";
          else donors = donors.filter((d) => d.id !== id);
        } else if (module === "recipients") {
          if (action === "approve")
            recipients.find((r) => r.id === id).status = "approved";
          else recipients = recipients.filter((r) => r.id !== id);
        } else if (module === "fake") {
          suspicious = suspicious.filter((s) => s.id !== id);
          alert(
            action === "block"
              ? "Profile has been blacklisted."
              : "Profile marked as safe."
          );
        }
        render();
      }

      function updateStats() {
        document.getElementById("stat-donors-count").innerText = donors.length;
        document.getElementById("stat-donors-pending").innerText =
          donors.filter((d) => d.status === "pending").length;
        document.getElementById("stat-recipients-count").innerText =
          recipients.length;
        document.getElementById("stat-recipients-pending").innerText =
          recipients.filter((r) => r.status === "pending").length;
        document.getElementById("stat-fake-count").innerText =
          suspicious.length;
      }

      // Boot
      render();
    </script>
  </body>
</html>
